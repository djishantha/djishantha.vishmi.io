<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Wedding Seating</title>
<style>
body {
    font-family: sans-serif;
    background-color: #87CEEB;
    text-align: center;
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}
.main-welcome {
    font-size: 48px;
    color: blue;
    font-family: 'Cursive', 'Brush Script MT', sans-serif;
    margin-bottom: 10px;
}
h2 { font-size: 28px; margin: 10px 0; }
.hotel-name { font-size: 16px; color: green; font-family: 'Georgia', serif; margin-top: 5px; }
.container {
    background-color: white;
    padding: 20px;
    border-radius: 10px;
    margin: 0 auto;
    max-width: 95%;
    width: 100%;
    box-shadow: 0 0 10px rgba(0,0,0,0.1);
}
input { padding: 10px; font-size: 16px; margin: 10px 5px; }
button {
    padding: 10px 15px;
    font-size: 16px;
    cursor: pointer;
    border: none;
    border-radius: 5px;
    color: white;
}
#findTableBtn { background-color: #007bff; }
#findTableBtn:hover { background-color: #0056b3; }
#findCarParkBtn { background-color: #28a745; margin-top: 15px; }
#findCarParkBtn:hover { background-color: #1e7e34; }
#results { margin-top: 15px; font-size: 18px; color: #333; }
.layout-container { position: relative; width: 100%; max-width: 500px; margin: 0 auto; }
.venue-img { width: 100%; height: auto; border-radius: 10px; display:block; }
.circle {
    position: absolute;
    width: 8%;
    aspect-ratio: 1/1;
    border-radius: 50%;
    display: flex;
    justify-content: center;
    align-items: center;
    color: white;
    font-weight: bold;
    font-size: 0.8em;
    transform: translate(-50%, -50%);
    background-color: blue;
    cursor: pointer;
}
.circle.selected { border: 2px solid yellow; }
@keyframes blinkColors {
    0% { background-color: blue; }
    33% { background-color: #00FF00; }
    66% { background-color: #FFFF00; }
    100% { background-color: blue; }
}
.circle.blink { animation: blinkColors 1.5s infinite; }
</style>
</head>
<body>

<div class="container">
    <h1 class="main-welcome">WELCOME !</h1>
    <h2>Harshana & Vishmi Wedding</h2>
    <h3 class="hotel-name">JETWING BLUE - NEGOMBO</h3>

    <h1>Find Your Table</h1>
    <input type="text" id="firstNameInput" placeholder="Enter your first name">
    <button id="findTableBtn">Table Number</button>
    <div id="results"></div>

    <div class="layout-container">
        <img src="Jetwing Blue.jpg" alt="Wedding Table Plan" class="venue-img">
        <div id="circlesContainer"></div>
    </div>

    <button id="findCarParkBtn">Find Your Car Park</button>
</div>

<script>
// Guest list
const guests = [
  { firstName: "Shiromi", lastName: "Sirithunga", table: 1 },
  { firstName: "Akash", lastName: "Hewapathirana", table: 2 },
  // ... Add all guests here
  { firstName: "Band", lastName: "Doctors 12", table: 31 },
  { firstName: "Wed Supports", lastName: "Plan Cam Dri", table: 32 },
];

// JSON positions
const savedPositions = {
"1":{"left":"10%","top":"10%"}, "2":{"left":"110px","top":"10%"}, "3":{"left":"195px","top":"145px"},
"4":{"left":"230px","top":"145px"}, "5":{"left":"80%","top":"10%"}, "6":{"left":"90%","top":"10%"},
"7":{"left":"10%","top":"30%"}, "8":{"left":"20%","top":"30%"}, "9":{"left":"30%","top":"30%"},
"10":{"left":"70%","top":"30%"}, "11":{"left":"80%","top":"30%"}, "12":{"left":"90%","top":"30%"},
"13":{"left":"10%","top":"50%"}, "14":{"left":"20%","top":"50%"}, "15":{"left":"30%","top":"50%"},
"16":{"left":"70%","top":"50%"}, "17":{"left":"80%","top":"50%"}, "18":{"left":"90%","top":"50%"},
"19":{"left":"10%","top":"70%"}, "20":{"left":"20%","top":"70%"}, "21":{"left":"30%","top":"70%"},
"22":{"left":"80%","top":"90%"}, "23":{"left":"80%","top":"70%"}, "24":{"left":"90%","top":"70%"},
"25":{"left":"10%","top":"90%"}, "26":{"left":"20%","top":"90%"}, "27":{"left":"30%","top":"90%"},
"28":{"left":"40%","top":"90%"}, "29":{"left":"50%","top":"88%"}, "30":{"left":"60%","top":"88%"},
"31":{"left":"70%","top":"90%"}, "BAND":{"left":"70%","top":"70%"}, "Help":{"left":"90%","top":"90%"}
};

const container = document.getElementById("circlesContainer");
const tableMap = {}; // optional mapping of table numbers to labels

// Create circles
for (let key in savedPositions) {
    const circle = document.createElement("div");
    circle.classList.add("circle");
    circle.textContent = key;
    circle.style.left = savedPositions[key].left;
    circle.style.top = savedPositions[key].top;
    container.appendChild(circle);
}

// Editing mode
let editingMode = true;
let selectedCircle = null;

container.querySelectorAll(".circle").forEach(circle => {
    circle.addEventListener("click", () => {
        if(!editingMode) return;
        if (selectedCircle) selectedCircle.classList.remove("selected");
        selectedCircle = circle;
        selectedCircle.classList.add("selected");
    });
});

// Arrow key movement (percentage)
document.addEventListener("keydown", e => {
    if (!editingMode || !selectedCircle) return;
    let top = parseFloat(selectedCircle.style.top);
    let left = parseFloat(selectedCircle.style.left);
    const step = 1; // percent

    switch(e.key) {
        case "ArrowUp": selectedCircle.style.top = Math.max(0, top - step) + "%"; break;
        case "ArrowDown": selectedCircle.style.top = Math.min(100, top + step) + "%"; break;
        case "ArrowLeft": selectedCircle.style.left = Math.max(0, left - step) + "%"; break;
        case "ArrowRight": selectedCircle.style.left = Math.min(100, left + step) + "%"; break;
    }
});

// Find table button
document.getElementById("findTableBtn").addEventListener("click", () => {
    const input = document.getElementById("firstNameInput").value.trim().toLowerCase();
    const resultsDiv = document.getElementById("results");
    resultsDiv.innerHTML = "";

    if(!input){ resultsDiv.textContent = "Please enter your first name."; return; }

    const matches = guests.filter(g => g.firstName.toLowerCase() === input);

    if(matches.length === 0) {
        resultsDiv.textContent = "No guest found with that first name.";
        return;
    }

    // Reset circles
    const circles = document.querySelectorAll(".circle");
    circles.forEach(c => { c.classList.remove("blink"); c.style.backgroundColor="blue"; });

    const list = document.createElement("ul");
    matches.forEach(g => {
        const item = document.createElement("li");
        item.textContent = `${g.firstName} ${g.lastName} - Table ${g.table}`;
        list.appendChild(item);

        circles.forEach(c => {
            if(c.textContent == g.table) c.classList.add("blink");
        });
    });
    resultsDiv.appendChild(list);
});

// Car park button
document.getElementById("findCarParkBtn").addEventListener("click", () => {
    window.open("https://maps.app.goo.gl/rW5yMQzisJt6ZzSM8", "_blank");
});

// Save positions
function savePositions() {
    const positions = {};
    document.querySelectorAll(".circle").forEach(c => {
        positions[c.textContent] = { left: c.style.left, top: c.style.top };
    });
    localStorage.setItem("circlePositions", JSON.stringify(positions));
    console.log("Positions saved:", positions);
}

// Load positions from localStorage
function loadPositions() {
    const stored = JSON.parse(localStorage.getItem("circlePositions") || "{}");
    if(!stored) return;
    document.querySelectorAll(".circle").forEach(c => {
        if(stored[c.textContent]){
            c.style.left = stored[c.textContent].left;
            c.style.top = stored[c.textContent].top;
        }
    });
}
document.addEventListener("DOMContentLoaded", loadPositions);

</script>
</body>
</html>
